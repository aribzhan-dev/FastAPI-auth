<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Авторизация · FastAPI Auth Demo</title>

  <!-- Иконки -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"/>

  <!-- Стили -->
  <link rel="stylesheet" href="/static/css/styles.css" />

  <meta name="description" content="Форма входа и регистрации с cookie-сессией для FastAPI." />
  <meta name="theme-color" content="#111827" />
</head>
<body>
  <noscript>
    Для работы страницы требуется JavaScript. Включите его в настройках браузера.
  </noscript>

  <div class="container">
    <div class="auth-wrapper">

      <!-- Заголовок -->
      <header class="header" aria-labelledby="auth-title">
        <h1 id="auth-title">Добро пожаловать</h1>
        <p>Войдите в свой аккаунт или создайте новый</p>
      </header>

      <!-- Карточка с вкладками -->
      <section class="card" aria-label="Формы авторизации">
        <div class="tabs" role="tablist" aria-label="Переключение между входом и регистрацией">
          <button class="tab-btn active" role="tab" aria-selected="true" onclick="switchTab('login')">
            <i class="fa-solid fa-right-to-bracket"></i>
            Вход
          </button>
          <button class="tab-btn" role="tab" aria-selected="false" onclick="switchTab('register')">
            <i class="fa-solid fa-user-plus"></i>
            Регистрация
          </button>
        </div>

        <!-- Вход -->
        <div id="login-form" class="tab-content active" role="tabpanel" aria-labelledby="login-tab">
          <form class="form" onsubmit="handleLogin(event)" autocomplete="on">
            <div class="form-group">
              <label for="login-email">Email</label>
              <div class="input-wrapper">
                <i class="fas fa-envelope" aria-hidden="true"></i>
                <input
                  type="email"
                  id="login-email"
                  name="email"
                  placeholder="Введите email"
                  required
                  inputmode="email"
                  autocomplete="username"
                />
              </div>
            </div>

            <div class="form-group">
              <label for="login-password">Пароль</label>
              <div class="input-wrapper">
                <i class="fas fa-lock" aria-hidden="true"></i>
                <input
                  type="password"
                  id="login-password"
                  name="password"
                  placeholder="Введите пароль"
                  required
                  autocomplete="current-password"
                />
                <button
                  type="button"
                  class="password-toggle"
                  aria-label="Показать/скрыть пароль"
                  onclick="togglePassword('login-password')"
                >
                  <i class="fas fa-eye" aria-hidden="true"></i>
                </button>
              </div>
            </div>

            <button type="submit" class="btn btn-primary">
              Войти
            </button>

            <!-- Демо-блок (можно скрыть в продакшене) -->
            <details class="demo-block">
              <summary><i class="fa-solid fa-flask"></i> Демо авторизации</summary>
              <p>Бэкенд поддерживает:</p>
              <ul>
                <li>Вход по заголовку <code>x-auth-token</code> с установкой cookie <code>web-app-session-id</code>.</li>
                <li>Проверку активной сессии по cookie.</li>
                <li>Выход (удаление cookie и сессии).</li>
                <li>Basic Auth и авторизацию через заголовок.</li>
              </ul>
            </details>
          </form>
        </div>

        <!-- Регистрация -->
        <div id="register-form" class="tab-content" role="tabpanel" aria-labelledby="register-tab">
          <form class="form" onsubmit="handleRegister(event)" autocomplete="on">
            <div class="form-group">
              <label for="register-name">Полное имя</label>
              <div class="input-wrapper">
                <i class="fas fa-user" aria-hidden="true"></i>
                <input
                  type="text"
                  id="register-name"
                  name="full_name"
                  placeholder="Введите полное имя"
                  required
                  autocomplete="name"
                />
              </div>
            </div>

            <div class="form-group">
              <label for="register-email">Email</label>
              <div class="input-wrapper">
                <i class="fas fa-envelope" aria-hidden="true"></i>
                <input
                  type="email"
                  id="register-email"
                  name="email"
                  placeholder="Введите email"
                  required
                  inputmode="email"
                  autocomplete="email"
                />
              </div>
            </div>

            <div class="form-group">
              <label for="register-password">Пароль</label>
              <div class="input-wrapper">
                <i class="fas fa-lock" aria-hidden="true"></i>
                <input
                  type="password"
                  id="register-password"
                  name="password"
                  placeholder="Придумайте пароль"
                  required
                  minlength="6"
                  autocomplete="new-password"
                />
                <button
                  type="button"
                  class="password-toggle"
                  aria-label="Показать/скрыть пароль"
                  onclick="togglePassword('register-password')"
                >
                  <i class="fas fa-eye" aria-hidden="true"></i>
                </button>
              </div>
            </div>

            <div class="form-group">
              <label for="register-confirm-password">Подтверждение пароля</label>
              <div class="input-wrapper">
                <i class="fas fa-lock" aria-hidden="true"></i>
                <input
                  type="password"
                  id="register-confirm-password"
                  name="password_confirm"
                  placeholder="Повторите пароль"
                  required
                  minlength="6"
                  autocomplete="new-password"
                />
                <button
                  type="button"
                  class="password-toggle"
                  aria-label="Показать/скрыть пароль"
                  onclick="togglePassword('register-confirm-password')"
                >
                  <i class="fas fa-eye" aria-hidden="true"></i>
                </button>
              </div>
            </div>

            <button type="submit" class="btn btn-primary">
              Создать аккаунт
            </button>

          </form>
        </div>
      </section>

      <!-- Футер -->
      <footer class="footer" role="contentinfo">
        <p>&copy; 2025 Ваша компания. Все права защищены.</p>
      </footer>
    </div>
  </div>

  <!-- Скрипт -->
  <script src="/static/js/script.js"></script>
</body>
</html>